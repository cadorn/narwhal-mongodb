#!/usr/bin/env narwhal
/*
if (system.args.length != 2) {
    print("Usage: " + system.args[0] + " [tests1|tests2]");
} else {
*/    var mongodb = require('mongodb');
    //var spelltest = require('./mongodb-test');
    // var json = require('json');
    // var file = require("file");
    
    var mon = new mongodb.Mongo("test", "localhost", 27017);
    var collNames = mon.getCollectionNames();
    for (var i = 0, length = collNames.length; i < length ; i++)
        print (collNames[i]);
    
    // Getting a collection
    var coll = mon.getCollection("test");
    print (coll)
    
    // Inserting into a collection
    var testdata = {
        "name" : "MongoDBTest", 
        "type" : "testdata", 
        "count" : 1, 
        "info" : {
            x : 203, y : 102
            }
    }
    coll.insert([testdata]);
    var myDoc = coll.findOne();
    print(myDoc);
//}
